<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- No necesitamos crear nuevos grupos de seguridad ya que usamos los existentes de contabilidad -->

        <!-- Regla para ocultar el botón de agregar línea -->
        <record id="rule_hide_create_line_button" model="ir.rule">
            <field name="name">Hide Create Line Button for Non-Accountants</field>
            <field name="model_id" ref="account.model_account_bank_statement_line"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- Regla para permitir todas las operaciones a contadores -->
        <record id="rule_allow_accountant_operations" model="ir.rule">
            <field name="name">Allow All Operations for Accountants</field>
            <field name="model_id" ref="account.model_account_bank_statement_line"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('account.group_account_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>
    </data>
</odoo> 